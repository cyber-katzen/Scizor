{
  "markdown": "  \nU/OO/142158 -20           PP-20-0433           3 JUNE 2020  \nNational Security Agency | Cybersecurity Report  \nTENS Virtual Machine Guide  \nIntroduction  \nThe U nited States  Air Force Trusted End Node Security (TENS)  solution  allows authorized DoD teleworkers to connect to  \nDoD sites and services from an untrusted computer  [1]. Some DoD teleworkers may not have Government Furnished \nEquipment  (GFE) for telework use. NSA recommends u sing TENS to boot into a temporary, trusted operating system to \nconnect to DoD sites and services over using the operating system of an untrusted computer.  \nBooting  TENS from removable  media  is the recommended  method of using TENS . Some users may not be able to use \nTENS if their computer  is not able to boot from removable media or if their computer uses UEFI Secure Boot , which  is not \ncurrently supported by TENS . Some users  may be able to disable Unified Extensible Firmware Interface ( UEFI ) Secure \nBoot allowing  TENS to boot, but disabling Secure Boot increases the risk of the operating system  being successfully \ncompromised by bo ot malware .  \nThe Air Force is working to get TENS to load when a computer uses UEFI Secure Boot, but until then , this guide provides \ninstructions for configuring a virtual machine to boot TENS.  Once TENS supports computers with UEFI Secure Boot \nenabled, NSA strongly recommends booting TENS  using the removable  media method instead of a virtual machine . \nRunning TENS  in a virtual machine , even as described in this guide , allows an adversary who has compromised the \nusers computer to observe all activity with in the virtual machine  using techniques such as screen capture and key \nlogging . Note that the TENS FAQ states that using a virtual machine is considered an unsupported platform [2]:  \nCan I run TENS in a virtual machine?  \nIn general, yes, but this is not enco uraged since kernel malware on the host can still be a threat. You should be able to take the ISO image and \nmount it as virtual CD within a virtualized environment and then tell the VM to boot from the image. We use these environment s for development \nand q uick testing, but have not formally qualified it as a supported platform. You are welcome to experiment, but keep in mind tha t this is not as \nsecure as booting directly into TENS. We arent certain all necessary hardware components (such as CAC readers) wi ll work properly, or that you \nwill see higher video resolutions. We consider virtual machines an unsupported platform.  \nPrerequisites  \nThe following requirements need to be met by virtualization software in order to use TENS and authenticate to DoD sites \nand services : \n1. The software must have  a no-cost license .  \n2. The no-cost license of the software must allow government  use. \n3. The no-cost license of the software must be able to pass through USB smart card reader devices from the host \noperating system to the guest operating system running TENS so that Common Access Cards (CAC) or Personal \nIdentity Verification (PIV) cards can be used in TENS to connect to DoD sites and services.  \n4. The licensed software must provide cross -platform support for  multiple host  operating system  vendor s. \n5. The licensed software must be supported by the vendor . \nOracle1 VirtualBox [3] is one example virtual ization  software th at meets the above requirements . This guide describes \nhow to run TENS 3.0. 1 Public Deluxe [4] within VirtualBox 6.1. 8. Any compatible virtual ization  software may be used  as \nlong as the prerequisites are met , though at the time of this writing N SA was unable to identify other software  which met \nthese inherent prerequisites  for home telework use . Before getting started:  \n1. Download  and install  the VirtualBox platform package for the host operating system . \n2. Download the TENS Public Deluxe  ISO file  or acquire a TENS CD/DVD from your organization . \n3. Obtain a  USB smart card reader  and a PIV smart card, such as a CAC . \n                                            \n1 Oracle  and VirtualBox  are registered trademark s of Oracle and/or its affiliates.  \n\n \n \nU/OO/142158 -20          PP-20-0433           3 JUN 2020  2 \nNSA | TENS Virtual Machine Guide  \nThis guide does not cover installation of VirtualBox, but t he default install ation  options for VirtualBox should be correct for \nmost users . Pay attention to any prompts during the install ation process . VirtualBox may prompt the user to grant \npermissions in order to p roceed  during and after the installation process. The  permissions request ed by VirtualBox are \nnecessary for VirtualBox to operate correctly.  \nNote that the license for the VirtualBox Extension Pack, which adds support for USB 2.0 and USB 3.0, does not allow  \ncommercial or government use for free. USB smart card readers should be backwards compatible with USB 1.1 which is \nsupported by VirtualBox by default.  \nUsers who install VirtualBox on Linux 2-based operating systems need to perform an important configurati on change \nbefore proceeding with configuring a virtual machine for TENS.  The configuration change  allows the user to add a USB \nsmart card reader to the virtual machine. Open a terminal and run the following command to add the curre nt user to the \nvboxusers group:  \nsudo adduser $USERNAME vboxusers  \nRestart  the computer  after running the command.  \nUsers who install VirtualBox on macOS 2 may have to grant system extension installation privileges to Oracle \nCorporation. If granting privileges is required, then a warning box will display during the installation process. The \ninstallation process may need to be started again after the privileg es are granted.  \nConfiguring a Virtual Machine for TENS  \nAt this point , all prerequisites have been completed for configuring  a virtual machine for TENS. Open Virtual Box and click \non the  blue New icon in the Oracle VM VirtualBox Manager  dialog,  displayed in  Figure 1, which start s the process for \nconfiguring a new virtual machine.  \n \nFigure 1: The Oracle VM VirtualBox Manager  dialog with the  New icon that starts the machine creation process.  \nComplete the fields in  Name and operating system dialog  as displayed in Figure 2. Enter a name , such as TENS , in the \nName  field.  Change  the Machine Folder  field value if desired . Select Linux  from the Type  drop down  menu.  Select \n                                            \n2 Linux is the registered trademark of Linu s Torvalds in the U.S. and other counties . macOS is a trademark of Apple Inc., registered in the U.S. and other countries.  Windows is a \nregistered trademark of Microsoft Corporation in the United States and/or other countries.  \n\n\n \n \nU/OO/142158 -20          PP-20-0433           3 JUN 2020  3 \nNSA | TENS Virtual Machine Guide  \nOther Linux (64 -bit) from the Version  drop down  menu.  Click the Next  button  (Windows 2 or Linux) or Continue  button \n(macOS) . \n \nFigure 2: The Name and operating system  dialog  with correct values.  \nThe default memory size of 512MB  is not enough memory for TENS. A minimum of  1.5GB  is recommended for TENS \nPublic Deluxe.  Allowing  more memory to be used by TENS improve s the performance  of TENS.  Entering a value of 4096 \ninto the text field , as displayed in Figure 3, allow s the virtual machine to use 4GB of memory . Note that t he text field does  \nnot allow enter ing a number greater than the amount of memory  available in the host computer . Click  the Next  button or \nContinue  button.  \n \nFigure 3: The Memory size  dialog  with 4096  (4GB) entered as  a value.  \nAt the Hard disk  dialog, select  the Do not add a virtual hard disk  radio button , as displayed in Figure 4, and click the \nCreate  button . \n\n\n \n \nU/OO/142158 -20          PP-20-0433           3 JUN 2020  4 \nNSA | TENS Virtual Machine Guide  \n \nFigure 4: The Hard disk  dialog with  the Do not add a virtual hard disk  radio button selected.  \nAfter clicking the Create  button, a  warning dialog  will display asking if the virtual machine should be created without virtual \na hard disk.  Since TENS is designed to operate without  using  a hard disk, click the Continue  button to proceed. A virtual \nmachine named  TENS has been cre ated.   \nRight click on the TENS  virtual machine entry in the Oracle VM VirtualBox  dialog and choose Settings  from the menu \nas displayed in Figure 5. \n \nFigure 5: The Settings  option in  the TENS virtual machine menu.  \n\n\n \n \nU/OO/142158 -20          PP-20-0433           3 JUN 2020  5 \nNSA | TENS Virtual Machine Guide  \nClick  the Storage  icon from the list of configuration options  as displayed in Figure 6. Note that the  icons for the \nconfiguration option s may appear as a row (macOS) of icons or as a column  (Linux or Windows ) of icons  depending on \nthe host operating system . \nOnce the Storage icon has been clicked, the  TENS - Settings  dialog  will show a  device named  Controller: IDE  under the \nlist of storage devices  as displayed in Figure 6. Below  the IDE controller ent ry, there is a CD/DVD  icon that will usually be \nlabeled  Empty  unless a CD /DVD  is inserted in to the computers CD/DVD  drive. Click  the CD /DVD  icon. Select the Live \nCD/DVD  checkbox  in the  Attributes  area on the right side of settings  dialog.  \nIf using an ISO file, then clic k the CD icon to the right of the Optical Drive  label,  and select  the Choose a disk file  \noption from the menu as displayed in Figure 6. Navigate to the location of the TENS ISO file on the host operating system  \nand click  the Open  button to select the ISO file . \n \nFigure 6: The Choose a disk  file option . \nIf using a physical CD/DVD, then click the CD icon to the right of the Optical Drive  label, and select the Host Drive D: \noption from the menu. Note that the CD/DVD drive letter may be a different letter.  \nTo configure the  TENS virtual machine to access the computer s USB smart card  reader, choose the USB  icon from the \ncolumn (if using Linux or Windows)  of icons  in the TENS  Settings  dialog as displayed in Figure 7. macOS users will first \nneed to select the Ports  icon, and then select the USB  tab to reach the same settings dialog . The Enable USB \nController  checkbox should already be selected as displayed in Figure 7. The USB 1.1 (OHCI) Controller  radio button  \nshould be selected by default . \nThe USB Device Filters  section of the settings dialog will initially be empty.  If the smart card reader is  an external device, \nrather than integrated into the computer (e.g. part of the keyboard or built into a laptop), then p lug in the smart card  reader \ninto a USB port on the computer.  Select the blue USB connector  icon that contains  a green plus symbol on th e right  side \nof the USB Device Filters  section . A list of all c urrently connected USB devices will be listed. Select  the smart card  \nreader from the list  as displayed in Figure 7. The smart card reader may be a generic name  or a specific smart card \nreader model device name . Once the smart card reader has been identified and selected, click the OK button  to save the \nconfiguration . \n\n\n \n \nU/OO/142158 -20          PP-20-0433           3 JUN 2020  6 \nNSA | TENS Virtual Machine Guide  \n \nFigure 7: USB smart card reader device selected in the USB configuration section of the TENS  Settings  dialog.  \nIf a smart card reader is not found in the list of devices, then unplug and plug -in the external USB smart card reader and \ntry again. Once the smart card reader device has been found and configured using the steps above, then the TENS virtual \nmachine has been successfully configured  for use . If other USB-based devices , such as webcams , are needed for \ncollaboration, then the  devic es can be added using similar steps . \nUsing TENS in a Virtual Machine  \nDo not insert the smart card into smart card reader b efore st arting the TENS virtual machine.  If using an external USB \nsmart card reader, then do not plug in the smart card reader into th e computer yet. Select the TENS  virtual machine entry \nin the Oracle VM VirtualBox Manager  dialog and click  the green Start  arrow icon, as displayed in Figure 8, to start the \nvirtual machine . \n \nFigure 8: The Start  icon used to start the virtual machine.  \n\n\n \n \nU/OO/142158 -20          PP-20-0433           3 JUN 2020  7 \nNSA | TENS Virtual Machine Guide  \nWait for TENS to boot to the point where the  TENS user agreement dialog , as displayed in Figure 9, is presented before \nplugging in an external  smart card reader . Once the user agreement dialog displays in TENS, plug in the external  smar t \ncard reader, and  click the OK button to accept the agreement to finish the TENS boot process.   \n \nFigure 9: TENS user agreement dialog.  \nNote that a dialog may display on macOS asking to grant VirtualBox permission to monitor keystrokes. Grant the \npermission. VirtualBox may need to be restarted to use the permission.  \nUse the TENS virtual machine to perform  authorized DoD telework tasks. Insert the smart card into the smart card reader \nonly when needed. Remove the smart card from the smart card reader w henever the smart card is not being actively used  \n(e.g. log ging into a protected site or sign ing an email) . Once telework tasks are complete, ensure all work is saved to an \nauthorized location as the data will be lost after  TENS is shut  down . Before shutting down  the TENS virtual machine , \nensure the smart card is removed from the reader  and unplug the smart card reader from the host  if using an external \nsmart card reader . \nTo shut down the virtual machine, select the shutdown option from within the  TENS environment by clicking the Start  \nmenu and selecting Shutdown . Alternatively,  close the window of the running TENS virtual machine instance  by clicking \nthe X icon in the upper right corner of the TEN S instance . When using the X icon to close the running TENS  virtual \nmachine instance , choose the Power off the machine  radio button  at the Close Virtual Machine  dialog , as displayed in \nFigure 10, and then click the OK button. Do not select the Save the machine state  radio button  because s aving machine \nstate could leave sensitive data in virtual machine  files on the host . \n \nFigure 10: The Close Virtual Machine  dialog . \nRemember to leave  the smart card  reader unplugged from the host computer when the TENS virtual machine is not in use  \nand remove the smart card from the smart reader when the smart card  is not being used . \n\n\n \n \nU/OO/142158 -20          PP-20-0433           3 JUN 2020  8 \nNSA | TENS Virtual Machine Guide  \nWorks Cited  \n[1] Air Force Research Laboratory (2020). Trusted End Node Security . [Online] Available at:  https://tens.af.mil/lipose.htm  [Accessed  May 20, \n2020]   \n[2] Air Force Research Laboratory (2020). Trusted End Node Security  - FAQs. [Online] Available at: https://tens.af.mil/liposeFAQ.htm  [Accessed  \nMay 20, 2020]   \n[3] Oracle  (2020). Downloads  Oracle VM VirtualBox . [Online] Available at : https://virtualbox.org/downloads  [Accessed May 20, 2020]  \n[4] Air Force Research Laboratory  (2020). Trusted End Node Security - Downloads . [Online] Available at : https://tens.af.mil/download.htm  \n[Accessed May 20, 2020]  \nDisclaimer of Warranties and Endorsement  \nThe information and opinions contained in this document are provided \"as is\" and without any warranties or guarantees. Refere nce herein to any specific \ncommercial products, process, or service by trade name,  trademark, manufacturer, or otherwise, does not constitute or imply its endorsement, \nrecommendation, or favoring by the United States Government, and this guidance shall not be used for advertising or product e ndorsement purposes.  \nContact  \nClient Requirements / General Cybersecurity Inquiries: Cy bersecurity Requirements Center , 410 -854-4200,  Cybersecurity_Requests@nsa.gov   \nMedia inquiries / Press Desk: 443 -634-0721, MediaRelations@nsa.gov   \n \n \n \n \n\n",
  "cves": [],
  "techniques": [],
  "advisory": "cybersecurity-alerts",
  "title": "csr-tens-virtual-machine-guide-20200603",
  "source": "nsa",
  "id": "186f2ba9ac53ec6f3924fe1ecdf4a7d8bf56d12ed688e3a0bcca5c28288b3a62"
}